/*! For license information please see index.6a44f487.js.LICENSE.txt */
(function(){var e,t,n,r,a={58380:function(e,t,n){"use strict";n.r(t),n("46169"),n("44070");var r=n("52676"),a=n("75271"),i=n("52900"),l=n("26838"),s=n("85940");let{Dragger:o}=i.Upload;t.default=e=>{let{onUploadSuccess:t}=e,[n,d]=(0,a.useState)({});return(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(o,{name:"file",multiple:!0,action:"/api/upload",customRequest:async e=>{let{file:n,onSuccess:r,onError:a,onProgress:l}=e,o=new FormData;o.append("file",n);try{let e=await s.default.post("/api/upload",o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(e.total){let t=Math.floor(e.loaded/e.total*100);d(e=>({...e,[n.uid]:t})),l({percent:t})}}});null==r||r(e.data),null==t||t(e.data),i.message.success(`${n.name} \u{4E0A}\u{4F20}\u{6210}\u{529F}`)}catch(e){null==a||a(e),i.message.error(`${n.name} \u{4E0A}\u{4F20}\u{5931}\u{8D25}`)}finally{d(e=>{let t={...e};return delete t[n.uid],t})}},beforeUpload:e=>!!e.size&&!!(e.size/1024/1024<20)||(i.message.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 20MB\uFF01"),!1),children:[(0,r.jsx)("p",{className:"ant-upload-drag-icon",children:(0,r.jsx)(l.InboxOutlined,{})}),(0,r.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u4E0A\u4F20"}),(0,r.jsx)("p",{className:"ant-upload-hint",children:"\u652F\u6301\u5355\u4E2A\u6216\u6279\u91CF\u4E0A\u4F20\uFF0C\u6587\u4EF6\u5927\u5C0F\u4E0D\u8D85\u8FC7 20MB"})]}),Object.entries(n).map(e=>{let[t,n]=e;return(0,r.jsx)(i.Progress,{percent:n,size:"small",style:{marginTop:8}},t)})]})}},6040:function(e,t,n){"use strict";n.r(t),n("27248"),n("60674"),n("32161");var r=n("52676"),a=n("75271"),i=n("52900"),l=n("26838"),s=n("85940");let o=(0,a.forwardRef)((e,t)=>{let[n,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(!1),[u,p]=(0,a.useState)({current:1,pageSize:10,total:0}),f=(0,a.useCallback)(async()=>{c(!0);try{let{data:e}=await s.default.get("/api/resources",{params:{page:u.current,limit:u.pageSize}});o(e.data),p(t=>({...t,total:e.pagination.total}))}catch(e){i.message.error("\u83B7\u53D6\u8D44\u6E90\u5217\u8868\u5931\u8D25")}c(!1)},[u.current,u.pageSize]);(0,a.useImperativeHandle)(t,()=>({refresh:()=>{f()}}),[f]),(0,a.useEffect)(()=>{f()},[f]);let x=async e=>{try{await s.default.delete(`/api/resources/${e}`),i.message.success("\u5220\u9664\u6210\u529F"),f()}catch(e){i.message.error("\u5220\u9664\u5931\u8D25")}},h=e=>{e.mimeType.startsWith("image/")?window.open(`/uploads/${e.filename}`):"application/pdf"===e.mimeType?window.open(`/uploads/${e.filename}`):i.message.info("\u6B64\u7C7B\u578B\u6587\u4EF6\u4E0D\u652F\u6301\u9884\u89C8\uFF0C\u8BF7\u4E0B\u8F7D\u540E\u67E5\u770B")},m=async e=>{try{let t=await s.default.get(`/api/resources/${e._id}/download`,{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",e.originalName),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(n)}catch(e){i.message.error("\u4E0B\u8F7D\u5931\u8D25")}};return(0,r.jsx)(i.Table,{columns:[{title:"\u6587\u4EF6\u540D",dataIndex:"originalName",key:"originalName",ellipsis:!0},{title:"\u7C7B\u578B",dataIndex:"mimeType",key:"mimeType",width:120},{title:"\u5927\u5C0F",dataIndex:"size",key:"size",width:120,render:e=>{let t=e/1024;return t>=1024?`${(t/1024).toFixed(2)} MB`:`${t.toFixed(2)} KB`}},{title:"\u4E0A\u4F20\u65F6\u95F4",dataIndex:"uploadDate",key:"uploadDate",width:180,render:e=>new Date(e).toLocaleString()},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"accessCount",key:"accessCount",width:100},{title:"\u64CD\u4F5C",key:"action",width:180,render:(e,t)=>(0,r.jsxs)(i.Space,{children:[(0,r.jsx)(i.Tooltip,{title:"\u9884\u89C8",children:(0,r.jsx)(i.Button,{type:"link",icon:(0,r.jsx)(l.EyeOutlined,{}),onClick:()=>h(t)})}),(0,r.jsx)(i.Tooltip,{title:"\u4E0B\u8F7D",children:(0,r.jsx)(i.Button,{type:"link",icon:(0,r.jsx)(l.DownloadOutlined,{}),onClick:()=>m(t)})}),(0,r.jsx)(i.Tooltip,{title:"\u5220\u9664",children:(0,r.jsx)(i.Button,{type:"link",danger:!0,icon:(0,r.jsx)(l.DeleteOutlined,{}),onClick:()=>x(t._id)})})]})}],dataSource:n,rowKey:"_id",pagination:u,loading:d,onChange:e=>p(e)})});o.displayName="ResourceList",t.default=o},45569:function(e,t,n){"use strict";n.r(t);var r=n("52676"),a=n("75271"),i=n("52900"),l=n("26838"),s=n("85940");t.default=()=>{let[e,t]=(0,a.useState)([]),n=async()=>{try{let{data:e}=await s.default.get("/api/trash");t(e.data)}catch(e){i.message.error("\u83B7\u53D6\u5783\u573E\u6876\u5217\u8868\u5931\u8D25")}};(0,a.useEffect)(()=>{n()},[]);let o=async e=>{try{await s.default.put(`/api/trash/${e}/restore`),i.message.success("\u6587\u4EF6\u5DF2\u6062\u590D"),n()}catch(e){i.message.error("\u6062\u590D\u5931\u8D25")}},d=async e=>{try{await s.default.delete(`/api/trash/${e}`),i.message.success("\u6587\u4EF6\u5DF2\u6C38\u4E45\u5220\u9664"),n()}catch(e){i.message.error("\u5220\u9664\u5931\u8D25")}};return(0,r.jsx)(i.Table,{columns:[{title:"\u6587\u4EF6\u540D",dataIndex:"originalName",key:"originalName",ellipsis:!0},{title:"\u7C7B\u578B",dataIndex:"mimeType",key:"mimeType",width:120},{title:"\u5927\u5C0F",dataIndex:"size",key:"size",width:120,render:e=>`${(e/1024).toFixed(2)} KB`},{title:"\u5220\u9664\u65F6\u95F4",dataIndex:"deleteDate",key:"deleteDate",width:180,render:e=>new Date(e).toLocaleString()},{title:"\u6062\u590D\u622A\u6B62\u65F6\u95F4",dataIndex:"restoreDeadline",key:"restoreDeadline",width:180,render:e=>new Date(e).toLocaleString()},{title:"\u64CD\u4F5C",key:"action",width:180,render:(e,t)=>(0,r.jsxs)(i.Space,{children:[(0,r.jsx)(i.Tooltip,{title:"\u6062\u590D",children:(0,r.jsx)(i.Button,{type:"link",icon:(0,r.jsx)(l.UndoOutlined,{}),onClick:()=>o(t._id)})}),(0,r.jsx)(i.Tooltip,{title:"\u5220\u9664",children:(0,r.jsx)(i.Button,{type:"link",danger:!0,icon:(0,r.jsx)(l.DeleteOutlined,{}),onClick:()=>d(t._id)})})]})}],dataSource:e,rowKey:"_id"})}},36914:function(e,t,n){"use strict";n.r(t);var r=n("52676"),a=n("75271"),i=n.n(a),l=n("38751"),s=n("98480"),o=n("14185");n("51912"),(0,l.createRoot)(document.getElementById("root")).render((0,r.jsx)(i().StrictMode,{children:(0,r.jsx)(s.RouterProvider,{router:o.default})}))},203:function(e,t,n){"use strict";n.r(t);var r=n("52676");n("75271");var a=n("52900"),i=n("98480"),l=n("26838");let{Header:s,Content:o,Sider:d}=a.Layout;t.default=()=>{let e=(0,i.useNavigate)(),t=(0,i.useLocation)(),n=[{key:"/",icon:(0,r.jsx)(l.HomeOutlined,{}),label:"\u9996\u9875"},{key:"/resources",icon:(0,r.jsx)(l.FileOutlined,{}),label:"\u8D44\u6E90\u7BA1\u7406"},{key:"/trash",icon:(0,r.jsx)(l.DeleteOutlined,{}),label:"\u56DE\u6536\u7AD9"},{key:"/settings",icon:(0,r.jsx)(l.SettingOutlined,{}),label:"\u7CFB\u7EDF\u8BBE\u7F6E"}];return(0,r.jsxs)(a.Layout,{style:{minHeight:"100vh"},children:[(0,r.jsx)(s,{style:{padding:0,background:"#fff"},children:(0,r.jsx)("div",{style:{padding:"0 24px",fontSize:"18px",fontWeight:"bold"},children:"CDN \u8D44\u6E90\u7BA1\u7406\u7CFB\u7EDF"})}),(0,r.jsxs)(a.Layout,{children:[(0,r.jsx)(d,{width:200,style:{background:"#fff"},children:(0,r.jsx)(a.Menu,{mode:"inline",selectedKeys:[t.pathname],style:{height:"100%",borderRight:0},items:n,onClick:t=>{let{key:n}=t;return e(n)}})}),(0,r.jsx)(a.Layout,{style:{padding:"24px"},children:(0,r.jsx)(o,{style:{background:"#fff",padding:24,margin:0,minHeight:280},children:(0,r.jsx)(i.Outlet,{})})})]})]})}},41558:function(e,t,n){"use strict";n.r(t);var r=n("52676");n("75271");var a=n("52900"),i=n("26838");t.default=()=>(0,r.jsx)("div",{children:(0,r.jsxs)(a.Row,{gutter:16,children:[(0,r.jsx)(a.Col,{span:8,children:(0,r.jsx)(a.Card,{children:(0,r.jsx)(a.Statistic,{title:"\u603B\u8D44\u6E90\u6570",value:123,prefix:(0,r.jsx)(i.FileOutlined,{})})})}),(0,r.jsx)(a.Col,{span:8,children:(0,r.jsx)(a.Card,{children:(0,r.jsx)(a.Statistic,{title:"\u4ECA\u65E5\u4E0A\u4F20",value:12,prefix:(0,r.jsx)(i.CloudUploadOutlined,{})})})}),(0,r.jsx)(a.Col,{span:8,children:(0,r.jsx)(a.Card,{children:(0,r.jsx)(a.Statistic,{title:"\u603B\u8BBF\u95EE\u91CF",value:1234,prefix:(0,r.jsx)(i.EyeOutlined,{})})})})]})})},63497:function(e,t,n){"use strict";n.r(t);var r=n("52676"),a=n("75271"),i=n("52900"),l=n("6040"),s=n("58380");t.default=()=>{let e=(0,a.useRef)(null);return(0,r.jsxs)("div",{children:[(0,r.jsx)(s.default,{onUploadSuccess:()=>{var t;(t=e.current)===null||void 0===t||t.refresh()}}),(0,r.jsx)(i.Card,{style:{marginTop:16},children:(0,r.jsx)(l.default,{ref:e})})]})}},94310:function(e,t,n){"use strict";n.r(t);var r=n("52676");n("75271");var a=n("52900");t.default=()=>(0,r.jsx)(a.Card,{title:"\u7CFB\u7EDF\u8BBE\u7F6E",children:(0,r.jsxs)(a.Form,{layout:"vertical",children:[(0,r.jsx)(a.Form.Item,{label:"\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F\u9650\u5236",name:"maxFileSize",children:(0,r.jsx)(a.InputNumber,{addonAfter:"MB",min:1,max:1e3})}),(0,r.jsx)(a.Form.Item,{label:"\u5141\u8BB8\u7684\u6587\u4EF6\u7C7B\u578B",name:"allowedTypes",children:(0,r.jsx)(a.Input,{placeholder:"\u4F8B\u5982: .jpg,.png,.pdf"})}),(0,r.jsx)(a.Form.Item,{label:"\u542F\u7528\u8BBF\u95EE\u7EDF\u8BA1",name:"enableStats",children:(0,r.jsx)(a.Switch,{})}),(0,r.jsx)(a.Form.Item,{children:(0,r.jsx)(a.Button,{type:"primary",children:"\u4FDD\u5B58\u8BBE\u7F6E"})})]})})},49212:function(e,t,n){"use strict";n.r(t);var r=n("52676");n("75271");var a=n("52900"),i=n("45569");t.default=()=>(0,r.jsx)(a.Card,{title:"\u56DE\u6536\u7AD9",children:(0,r.jsx)(i.default,{})})},14185:function(e,t,n){"use strict";n.r(t);var r=n("52676"),a=n("98480"),i=n("203"),l=n("41558"),s=n("63497"),o=n("49212"),d=n("94310");let c=(0,a.createBrowserRouter)([{path:"/",element:(0,r.jsx)(i.default,{}),children:[{index:!0,element:(0,r.jsx)(l.default,{})},{path:"resources",element:(0,r.jsx)(s.default,{})},{path:"trash",element:(0,r.jsx)(o.default,{})},{path:"settings",element:(0,r.jsx)(d.default,{})}]}]);t.default=c},51912:function(e){}},i={};function l(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return a[e].call(n.exports,n,n.exports,l),n.exports}l.m=a,l.es=function(e,t){return Object.keys(e).forEach(function(n){"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),e},e=[],l.O=function(t,n,r,a){if(n){a=a||0;for(var i=e.length;i>0&&e[i-1][2]>a;i--)e[i]=e[i-1];e[i]=[n,r,a];return}for(var s=1/0,i=0;i<e.length;i++){for(var n=e[i][0],r=e[i][1],a=e[i][2],o=!0,d=0;d<n.length;d++)s>=a&&Object.keys(l.O).every(function(e){return l.O[e](n[d])})?n.splice(d--,1):(o=!1,a<s&&(s=a));if(o){e.splice(i--,1);var c=r();void 0!==c&&(t=c)}}return t},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={980:0},l.O.j=function(e){return 0===t[e]},n=function(e,n){var r=n[0],a=n[1],i=n[2],s,o,d=0;if(r.some(function(e){return 0!==t[e]})){for(s in a)l.o(a,s)&&(l.m[s]=a[s]);if(i)var c=i(l)}for(e&&e(n);d<r.length;d++)o=r[d],l.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return l.O(c)},(r=self.webpackChunkcdn_manager=self.webpackChunkcdn_manager||[]).forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r));var s=l.O(void 0,["126","72","707","361","118","587"],function(){return l("36914")});l.O(s)})();